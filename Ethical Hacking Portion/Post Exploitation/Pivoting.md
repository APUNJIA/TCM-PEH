So lets say we've compromised a machine, and that machine allows you access to 2 network interfaces, and those interfaces share a new network interface that was unavailable to us.

So, instead of downloading tools like [[Scanning with nmap|nmap]] on the compromised machine to access the other networks, we can set up a proxy and pivot through that to the other network

We can do pivoting with different tools. 

First tool we can use is called ProxyChains

To use it, first lets go to the ProxyChains config file:

```bash
cat /etc/proxychains4.conf
```

![[Pasted image 20240829232431.png]]

We would be binding to this port. It will be different for different machines(im using the one TCM is showing)

We can then run the following command:

```bash
ssh -f -N -D 9050 -i pivot root@<ip_we_have_access_to>
```

-i is identity connection, -f basically backgrounds the ssh. -N basically means we do not want to execute remote commands. This is only for forwarding ports. -D is basically where to bind the port.

Then we can use proxychains to run different commands from our attacking machine without actually using the compromised machine.

Some Examples:

```bash
proxychains nmap -p88 10.10.10.225
```

```bash
proxychains GetUserSPNs.py MARVEL.local/fcastle:Password1 -dc-ip 10.10.10.225 -request
```

Remember [[Kerberoasting]]??

```bash
proxychains xfreerdp /u:Administrator /p:'Hacker321!' /v:10.10.10.225
```

The other tool you can use is sshuttle.

This tool does not require you to set a proxy beforehand, it by default sets a proxy with this command:

```bash
sshuttle -r root@10.10.155.5 10.10.10.0/24 --ssh-cmd "ssh -i pivot"
```

And now we are connected with the network. The cool part about this is we dont have to type something like proxychains in front on every command. We can run anything as is as long as the above command is still running.

Another tool we can utilize is chizel.

